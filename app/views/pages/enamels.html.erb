<div id='fixed-top'>
<% unless @sort_by.present? %>
  <ol class="breadcrumb" style='margin-bottom:0;-webkit-box-shadow: 0px 0px 15px 0px rgba(0,0,0,0.15);-moz-box-shadow: 0px 0px 15px 0px rgba(0,0,0,0.15);box-shadow: 0px 0px 15px 0px rgba(0,0,0,0.15);'>
    <p style='display:inline-block; margin-bottom:0; margin-right:30px; font-weight:bold;'>JEWELLERY:</p>
    <li><%= link_to 'All', enamels_path, style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Bracelet', enamels_path(:theme => 'Bracelet'), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Composition', enamels_path(:theme => 'Composition'), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Earring', enamels_path(:theme => 'Earring'), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Icon', enamels_path(:theme => 'Icon'), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Necklace', enamels_path(:theme => 'Necklace'), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Pin', enamels_path(:theme => 'Pin'), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Ring', enamels_path(:theme => 'Ring'), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Other', enamels_path(:theme => 'Other'), style: 'font-weight:bold;' %></li>
    <li> <%= link_to 'Authors', artists_path(spec: 'Enamel'), style: 'font-weight:bold; color:#484848;' %></li>
    <div style='display:inline-block; float:right; margin-bottom:20px; background-color:whitesmoke;'>
      <% unless @theme.present? %>
        <%= form_tag(enamels_path, :id => "sort_select", method: :get) do %>
          <strong>Sort By:</strong> <%= select_tag :sort_by, options_for_select(['Random', 'Recently added', ' Price low to high', 'Price high to low', 'Most Comments', 'Most Votes', 'Discounted Items', 'Sold Items']), :onchange => ("$('#sort_select').submit()") %>
        <% end %>
      <% else %>
        <%= form_tag(enamels_path, :id => "sort_select", method: :get) do %>
          <strong>Sort By:</strong> <%= select_tag :sort_by, options_for_select(['Random', 'Recently added', 'Price low to high', 'Price high to low', 'Most Comments', 'Most Votes', 'Discounted Items', 'Sold Items']), :onchange => ("$('#sort_select').submit()") %>
          <%= hidden_field_tag :theme, @theme %>
        <% end %>
      <% end %>
    </div>
    <div data-toggle='modal' data-target='#enamel-hist' class='btn btn-default enamel-history' style='margin-top:10px;'>
      <i style='display:inline-block;' class="fa fa-history"></i>
      <p style='font-weight:bold; text-align:center; display:inline-block; margin:0;'>History Of Georgian Cloisonne Enamel</p>
    </div>
  </ol>
<% else %>
  <ol class="breadcrumb" style='margin-bottom:0;-webkit-box-shadow: 0px 0px 15px 0px rgba(0,0,0,0.15);-moz-box-shadow: 0px 0px 15px 0px rgba(0,0,0,0.15);box-shadow: 0px 0px 15px 0px rgba(0,0,0,0.15);'>
    <p style='display:inline-block; margin-bottom:0; margin-right:30px; font-weight:bold;'>JEWELLERY:</p>
    <li><%= link_to 'All', enamels_path, style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Bracelet', enamels_path(:theme => 'Bracelet', :sort_by => @sort_by), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Composition', enamels_path(:theme => 'Composition', :sort_by => @sort_by), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Earring', enamels_path(:theme => 'Earring', :sort_by => @sort_by), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Icon', enamels_path(:theme => 'Icon', :sort_by => @sort_by), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Necklace', enamels_path(:theme => 'Necklace', :sort_by => @sort_by), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Pin', enamels_path(:theme => 'Pin', :sort_by => @sort_by), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Ring', enamels_path(:theme => 'Ring', :sort_by => @sort_by), style: 'font-weight:bold;' %></li>
    <li><%= link_to 'Other', enamels_path(:theme => 'Other', :sort_by => @sort_by), style: 'font-weight:bold;' %></li>
    <li> <%= link_to 'Authors', artists_path(spec: 'Enamel'), style: 'font-weight:bold; color:#484848;' %></li>
    <div style='display:inline-block; float:right; margin-bottom:20px; background-color:whitesmoke;'>
      <% unless @theme.present? %>
        <%= form_tag(enamels_path, :id => "sort_select", method: :get) do %>
          <strong>Sort By:</strong> <%= select_tag :sort_by, options_for_select(['Random', 'Recently added',' Price low to high', 'Price high to low', 'Most Comments', 'Most Votes', 'Discounted Items', 'Sold Items'], selected: @sort_by), :onchange => ("$('#sort_select').submit()") %>
        <% end %>
      <% else %>
        <%= form_tag(enamels_path, :id => "sort_select", method: :get) do %>
          <strong>Sort By:</strong> <%= select_tag :sort_by, options_for_select(['Random', 'Recently added', 'Price low to high', 'Price high to low', 'Most Comments', 'Most Votes', 'Discounted Items', 'Sold Items'], selected: @sort_by), :onchange => ("$('#sort_select').submit()") %>
          <%= hidden_field_tag :theme, @theme %>
        <% end %>
      <% end %>
    </div>
    <div data-toggle='modal' data-target='#enamel-hist' class='btn btn-default enamel-history' style='margin-top:10px;'>
      <i style='display:inline-block;' class="fa fa-history"></i>
      <p style='font-weight:bold; text-align:center; display:inline-block; margin:0;'>History Of Georgian Cloisonne Enamel</p>
    </div>
  </ol>
<% end %>

<div id='search-gonna-hide' style='width:100%; margin-bottom:25px; margin-top:15px;'>
  <%= search_form_for @q, url: enamels_path, html: { class: 'input-group', style: 'width:200px; margin-left:auto; margin-right:auto;'} do |f| %>
    <span class="input-group-btn">
      <button type='submit;' class="btn btn-default" type="button" style='-webkit-border-top-right-radius: 0px;-webkit-border-bottom-right-radius: 0px;-moz-border-radius-topright: 0px;-moz-border-radius-bottomright: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px; border-right:none;'><i class="fa fa-search fa-lg"></i></button>
    </span><%= f.search_field :name_or_artist_name_cont, placeholder: 'Search...', class: 'form-control', style: 'margin-left:-1px;' %>
  <% end %>
</div>
</div>

<div id='loading' style='margin-left:auto; margin-right:auto; margin-top:20px; width:180px; height:130px; background-image:url("../assets/loading.gif"); background-repeat: no-repeat; background-position:-200px -150px;'>
</div>

<div class="modal fade" id="enamel-hist" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="margin-top:50px;">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel" style="font-weight:700; text-align:center;">History Of Georgian Cloisonne Enamel</h4>
      </div>
      <div class="modal-body">
        <p>
          The art of enamel began in the ancient times. Its first works were found in Egypt and the island of Crete. Later it spread to Rome, Byzantium and even reached China and India through silk road.<br/><br/>
          Enamel has a glossy image, which is formed on metal and is fastened to it in the kiln. The process of its fulfillment is extremely diverse and techniques are completely different, which allows an outcome of exciting effects. There were different examples of it in various countries and epochs. In medieval western Europe there was widely spread technique – cavity enamel: on a metal surface there were made holes and different paint colors, which contained loose glass, were placed in it. Afterwards it was burned in kiln – glass melted and had taken different colors of glossy spots.<br/><br/>
          In Georgia, Byzantium and China there was used the most laborious and time consuming technique – cloisonné enamel. The <b>5 step process</b> requires:<br/><br/> <b> 1. Golden plate needs to be prepared and polished (nowadays silver and copper plates are also used). <br/>2. In areas where the line should be visible, gold thin strips are fastened to form partitions. <br/>3. In separate spaces, created by partitions, different colored powders are disposed. <br/>4. The product is burned in kiln, (Sometimes more than just once - different dyes require different annealing time and temperature); and <br/>5. Finally it is polished.<br/><br/>Such hard work requires in-depth knowledge, sophisticated devices and precious materials.</b><br/><br/>
         The heritage of Georgian enamel masters is very significant. One of the earliest samples of medieval Georgian cloisonné enameling is Martvili triptych (encolpion), made in the 9th century. A scene of Deesis is represented by the figures of Christ, Mary and John the Precursor.<br/><br/>
         Ancient Georgian cloisonné enamel samples - crosses, medallions, and icons are stored at the Georgian National Museum. Not only in the number of exhibits, but artistic merits of this collection is regarded as one the best exhibits of the world. According to experts, this collection is not less remarkable, than famous Venetian collection of enamels.<br/><br/>
         Unfortunately, many Georgian masters’ masterpieces have been lost or destroyed over the centuries. Some also were found in foreign collections. For example, in XIX century Khakhuli unique icon - The Golden Triptych of Virgin Mary - the world’s biggest enamel, was stolen from Gelati Monastery. The golden triptych is enclosed with 115 small enamels, where in the center is the image of the Virgin Mary. After centuries The Golden Triptych of Virgin Mary has returned to Georgia and since 1952 is stored at treasury at the Georgian Museum of Arts. Unfortunately icon was returned to Georgia in a badly fragmented state, only the face and hands of the Virgin Mary have been preserved.<br/><br/>
        The secret of creating of Georgian cloisonné enamel was lost for a long time. But today, this unique art is revived. 
       Currently this field is very diverse and many wonderful works are created, some of which can be found at ArtIveria’s online art gallery. 
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div id='show' style='display:none;'>
<% if @items.present? %>
  <div id="container" style='margin-left:auto; margin-right:auto;'>
    <% @items.each do |item| %>
      <div class='item' style='text-align:center; margin-right:20px; margin-left:20px; width:340px; margin-bottom:50px;'>
        <%= link_to item do %>
          <%= image_tag item.image.url(:medium), style: "margin-right:auto; margin-left:auto;-webkit-box-shadow: 7px 7px 5px 0px rgba(50, 50, 50, 0.75);-moz-box-shadow:    7px 7px 5px 0px rgba(50, 50, 50, 0.75);box-shadow:         7px 7px 5px 0px rgba(50, 50, 50, 0.75); margin-bottom:15px;" %>
        <% end %>
        <%= link_to item.name.split.map(&:capitalize)*' ', item, style: "text-decoration:none; color:#444; margin-left:auto; margin-right:auto; font-weight:bold; display:block; margin-bottom:0px;" %>
        <%= link_to item.artist.name.split.map(&:capitalize)*' ', item.artist, style: "text-decoration:none; color:#444; margin-left:auto; margin-right:auto; margin-top:0px; display:block;" %>
        <% if item.price.present? %><div class='price'><%= '$ '+item.price.to_s %></div><% end %>
      </div>
    <% end %>
  </div>

  <div style='text-align:center;'>
     <%= will_paginate @items, renderer: BootstrapPagination::Rails %>
  </div>
</div>

<% else %>
  <script>
    var n = noty({
      text: '<p style="width:100%; margin-top:15px; margin-bottom:15px; text-align:center; font-weight:bold; font-size:120%;">No such items found.</p>',
      layout: 'topRight',
      type: 'information',
      animation: {
        open: 'animated fadeInRight', // Animate.css class names
        close: 'animated flipOutY', // Animate.css class names
        speed: 500 // unavailable - no need
      }
    });
    </script>
<% end %>

<script>
var isotopeLaunch = function(){
  var $container = $('#container');
    // init

    $container.isotope({
      // options
      itemSelector: '.item',
      layoutMode: 'fitRows',
    });
};
imagesLoaded( 'img', function(){
  $('#loading').hide();
  $('#show').show();
  isotopeLaunch();
});

 fixed = $('#fixed-top');
 offset = $('#fixed-top').offset();
  $(window).scroll(function(e){
    width = $('#fixed-top').width();
    if ($(this).scrollTop() > offset.top && fixed.css('position') != 'fixed'){
      fixed.css({'position': 'fixed', 'top': '0px', 'z-index': '1', 'width': width+'px'});
      $('#search-gonna-hide').animate({opacity: 0});
    }else if ($(this).scrollTop() < offset.top && fixed.css('position') == 'fixed' ){
      fixed.css({'position': 'relative', 'z-index': '0'});
      $('#search-gonna-hide').animate({opacity: 1});
    }
  });
</script>